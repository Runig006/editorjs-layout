!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("bootstrap")):"function"==typeof define&&define.amd?define(["bootstrap"],e):"object"==typeof exports?exports.EditorJSLayout=e(require("bootstrap")):t.EditorJSLayout=e(t.bootstrap)}(self,(function(t){return(()=>{"use strict";var e={217:e=>{e.exports=t}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,o),a.exports}o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{o.r(r),o.d(r,{LayoutBlockTool:()=>x});class t extends Error{constructor(...e){super(...e),Error.captureStackTrace&&Error.captureStackTrace(this,t),this.name="EditorJSLayoutError"}}var e,n=new Uint8Array(16);function a(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(n)}const i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(t){return"string"==typeof t&&i.test(t)};for(var d=[],c=0;c<256;++c)d.push((c+256).toString(16).substr(1));const l=function(t,e,n){var o=(t=t||{}).random||(t.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=o[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n}(o)};var u=o(217);const p=({EditorJS:t,data:e,editorJSConfig:n,onClose:o})=>{const r=document.createElement("div"),a=l();r.id=a,r.className="modal";const i=document.createElement("div");i.className="modal-dialog";const s=document.createElement("div");s.className="modal-content";const d=document.createElement("div");d.className="modal-header";const c=document.createElement("div");c.className="modal-title",c.innerHTML="EditorJS Layout";const p=document.createElement("div");p.className="btn-close",p.setAttribute("data-bs-dismiss","modal");const f=document.createElement("div"),m=l();f.id=m,f.className="modal-body",d.append(c),d.append(p),s.append(d),s.append(f),i.append(s),r.append(i),document.body.append(r);const y=new t(Object.assign(Object.assign({},n),{holder:m,data:e}));var h=document.getElementById(a);new u.Modal(h,{backdrop:!0}).show(),h.addEventListener("hide.bs.modal",(function(t){return e=this,n=void 0,a=function*(){const t=yield y.save();y.destroy(),null==o||o({editorJSData:t}),h.remove()},new((r=void 0)||(r=Promise))((function(t,o){function i(t){try{d(a.next(t))}catch(t){o(t)}}function s(t){try{d(a.throw(t))}catch(t){o(t)}}function d(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,s)}d((a=a.apply(e,n||[])).next())}));var e,n,r,a}))};const f=t=>{var e,{data:n,itemContentData:o}=t,r=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}(t,["data","itemContentData"]);const a=document.createElement("div");n.id&&(a.id=n.id),n.className&&(a.className=n.className),n.style&&(a.style.cssText=n.style);const i=null!==(e=o[n.itemContentId])&&void 0!==e?e:{blocks:[]};return a.append((({EditorJS:t,data:e,dispatchData:n,editorJSConfig:o,itemContentId:r,readOnly:a})=>{const i=l(),s=document.createElement("div");return s.id=i,a||(s.style.cursor="pointer",s.addEventListener("click",(()=>{p({EditorJS:t,data:e,editorJSConfig:o,onClose:({editorJSData:t})=>{return e=void 0,o=void 0,i=function*(){return n((({itemContent:e,layout:n})=>({itemContent:Object.assign(Object.assign({},e),{[r]:{version:t.version,blocks:t.blocks,time:t.time}}),layout:n})))},new((a=void 0)||(a=Promise))((function(t,n){function r(t){try{d(i.next(t))}catch(t){n(t)}}function s(t){try{d(i.throw(t))}catch(t){n(t)}}function d(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,s)}d((i=i.apply(e,o||[])).next())}));var e,o,a,i}})}))),new t(Object.assign(Object.assign({},o),{holder:i,data:e,minHeight:0,readOnly:!0})),s})(Object.assign(Object.assign({},r),{data:i,itemContentId:n.itemContentId}))),a};const m=e=>{var{data:n,itemContentData:o}=e,r=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}(e,["data","itemContentData"]);const a=document.createElement("div");return n.id&&(a.id=n.id),n.className&&(a.className=n.className),n.style&&(a.style.cssText=n.style),n.children.forEach((e=>{let n;switch(e.type){case"container":n=m(Object.assign(Object.assign({},r),{data:e,itemContentData:o}));break;case"item":n=f(Object.assign(Object.assign({},r),{data:e,itemContentData:o}));break;default:throw new t}a.append(n)})),a};var y,h,v,b,w,g,O=function(t,e,n,o,r){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?r.call(t,n):r?r.value=n:e.set(t,n),n},E=function(t,e,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(t):o?o.value:e.get(t)};class x{constructor({config:t,data:e,readOnly:n}){y.set(this,void 0),h.set(this,void 0),v.set(this,void 0),b.set(this,void 0),w.set(this,void 0),g.set(this,(t=>{const e=t({itemContent:E(this,b,"f"),layout:E(this,w,"f")});O(this,b,e.itemContent,"f"),O(this,w,e.layout,"f"),this.renderWrapper()})),O(this,h,n,"f"),O(this,v,document.createElement("div"),"f"),O(this,b,{},"f"),O(this,w,{type:"container",id:"",className:"",style:"",children:[]},"f"),t&&"EditorJS"in t&&(O(this,y,t,"f"),O(this,b,t.initialData.itemContent,"f"),t.initialData.layout&&O(this,w,t.initialData.layout,"f")),e&&"itemContent"in e&&(O(this,b,e.itemContent,"f"),e.layout&&O(this,w,e.layout,"f"))}static get isReadOnlySupported(){return!0}static get shortcut(){return"CMD+L"}static get toolbox(){return{icon:'\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 512 512">\n          <rect x="48" y="48" width="176" height="176" rx="20" ry="20" style="fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/>\n          <rect x="288" y="48" width="176" height="176" rx="20" ry="20" style="fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/>\n          <rect x="48" y="288" width="176" height="176" rx="20" ry="20" style="fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/>\n          <rect x="288" y="288" width="176" height="176" rx="20" ry="20" style="fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/>\n        </svg>\n      ',title:"Layout"}}render(){return this.renderWrapper(),E(this,v,"f")}save(){return{itemContent:E(this,b,"f"),layout:E(this,y,"f").enableLayoutSaving?E(this,w,"f"):void 0}}validate(t){return!0}renderWrapper(){E(this,v,"f").innerHTML="",E(this,v,"f").append(m({EditorJS:E(this,y,"f").EditorJS,data:E(this,w,"f"),dispatchData:E(this,g,"f"),editorJSConfig:E(this,y,"f").editorJSConfig,itemContentData:E(this,b,"f"),readOnly:E(this,h,"f")}))}}y=new WeakMap,h=new WeakMap,v=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap})(),r})()}));